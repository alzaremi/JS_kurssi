<!DOCTYPE html>
<html lang="fi">

<head>
    <meta charset="utf-8">
    <title>Työpaja 3</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            margin: 20px;
            line-height: 1.5;
        }

        h1, h2 {
            color: #333;
        }

        button {
            background-color: #0077cc;
            color: white;
            border: none;
            padding: 10px 16px;
            margin: 5px;
            border-radius: 6px;
            cursor: pointer;
            transition: 0.2s;
        }

        button:hover {
            background-color: #005fa3;
        }

        button:disabled {
            background-color: #aaa;
            cursor: not-allowed;
        }

        textarea {
            width: 100%;
            max-width: 400px;
            min-height: 100px;
            border: 1px solid #ccc;
            border-radius: 6px;
            padding: 8px;
            font-size: 14px;
            resize: vertical;
        }

        #charcount {
            font-size: 14px;
            margin-left: 5px;
        }

        #coordinates {
            border: 2px dashed #0077cc;
            padding: 40px;
            margin-top: 10px;
            min-height: 100px;
            text-align: center;
            font-weight: bold;
            color: #333;
            background-color: #f9f9f9;
        }

        #taulukonPaikka table {
            border-collapse: collapse;
            margin-top: 10px;
        }

        #taulukonPaikka th,
        #taulukonPaikka td {
            border: 1px solid #555;
            padding: 8px 12px;
        }

        #taulukonPaikka th {
            background-color: #0077cc;
            color: white;
        }

        #taulukonPaikka tr:nth-child(even) {
            background-color: #f2f2f2;
        }
    </style>
</head>

<body>
    <h1>Työpaja 3: JavaScript-tapahtumat</h1>
    <hr />
    <h2>Harjoitus 1</h2>
    <button id="btnAlert">Klikkaa minua</button>
    <button id="btnTable">Näytä taulukko</button>
    <div id="taulukonPaikka"></div>

    <h2>Harjoitus 2</h2>
    <h2 id="exercise2">Exercise 2</h2>

    <h2>Harjoitus 3</h2>
    <form>
        <textarea id="textdata"></textarea><br />
        <span id="charcount">0/200</span>
        <button>Lähetä</button>
    </form>

    <h2>Harjoitus 4</h2>
    <div id="coordinates">Lorem ipsum</div>

    <h2>Bonus-tehtävä</h2>

    <script>
        const btnAlert = document.getElementById("btnAlert");
        const btnTable = document.getElementById("btnTable");
        const taulukkoDiv = document.getElementById("taulukonPaikka");

        btnAlert.addEventListener("click", () => {
            alert("Klikkasit minua!");
        });

        btnTable.addEventListener("click", () => {
            const tableHTML = `
            <table>
                <thead>
                    <tr><th>Nimi</th><th>Tehtävä</th><th>Palkka</th></tr>
                </thead>
                <tbody>
                    <tr><td>Tiger Nixon</td><td>System Architect</td><td>$320,800</td></tr>
                    <tr><td>Garrett Winters</td><td>Accountant</td><td>$170,750</td></tr>
                    <tr><td>Ashton Cox</td><td>Junior Technical Author</td><td>$86,000</td></tr>
                    <tr><td>Cedric Kelly</td><td>Senior Javascript Developer</td><td>$433,060</td></tr>
                    <tr><td>Airi Satou</td><td>Accountant</td><td>$162,700</td></tr>
                </tbody>
            </table>`;
            taulukkoDiv.innerHTML = tableHTML;
        });

        const h2Exercise2 = document.getElementById("exercise2");
        h2Exercise2.addEventListener("mouseover", () => {
            console.log("Stepped over my a mouse!");
        });
        h2Exercise2.addEventListener("click", () => {
            h2Exercise2.style.color = "red";
            h2Exercise2.textContent = "Bye bye mouse!";
        });

        const textarea = document.getElementById("textdata");
        const charcount = document.getElementById("charcount");
        const sendBtn = document.querySelector("form button");

        textarea.addEventListener("focus", () => {
            alert("Please fill in the form with proper data.");
            textarea.style.backgroundColor = "#eef";
        });

        textarea.addEventListener("keyup", () => {
            const length = textarea.value.length;
            charcount.textContent = `${length}/200`;
            if (length > 200) {
                charcount.style.color = "red";
                sendBtn.disabled = true;
            } else {
                charcount.style.color = "black";
                sendBtn.disabled = textarea.value.trim() === "";
            }
        });

        sendBtn.addEventListener("click", (e) => {
            e.preventDefault();
            if (textarea.value.trim() === "") {
                alert("Tekstikenttä ei saa olla tyhjä!");
            } else if (textarea.value.length > 200) {
                alert("Liikaa merkkejä!");
            } else {
                alert("Lähetetty!");
            }
        });

        const coordinatesDiv = document.getElementById("coordinates");
        coordinatesDiv.addEventListener("mousemove", (e) => {
            const coordsText = `X: ${e.clientX}, Y: ${e.clientY}`;
            console.log(coordsText);
            coordinatesDiv.innerHTML = coordsText;
        });

        const geoBtn = document.createElement("button");
        geoBtn.textContent = "Näytä sijainti";
        document.body.appendChild(geoBtn);

        geoBtn.addEventListener("click", () => {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(
                    (pos) => {
                        const lat = pos.coords.latitude;
                        const lon = pos.coords.longitude;
                        console.log(`Latitude: ${lat}, Longitude: ${lon}`);
                        alert(`Latitude: ${lat}, Longitude: ${lon}`);
                        window.open(`https://www.google.com/maps?q=${lat},${lon}`);
                    },
                    (err) => {
                        alert("Sijaintia ei saatavilla: " + err.message);
                    }
                );
            } else {
                alert("Geolocation ei ole tuettu selaimessasi.");
            }
        });
    </script>
</body>
</html>
